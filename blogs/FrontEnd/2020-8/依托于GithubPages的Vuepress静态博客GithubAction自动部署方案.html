<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>依托于GithubPages的Vuepress静态博客GithubAction自动部署方案 | QiJieH&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/blog/web-img/author.jpg">
    <meta name="description" content="于朝阳升起处,我将踏上旅程">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="preload" href="/blog/assets/css/0.styles.e168caf7.css" as="style"><link rel="preload" href="/blog/assets/js/app.265510bb.js" as="script"><link rel="preload" href="/blog/assets/js/4.9426981b.js" as="script"><link rel="preload" href="/blog/assets/js/1.b075f33e.js" as="script"><link rel="preload" href="/blog/assets/js/13.81644de3.js" as="script"><link rel="preload" href="/blog/assets/js/9.0e33fc2c.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.bb9b2106.js"><link rel="prefetch" href="/blog/assets/js/11.32769570.js"><link rel="prefetch" href="/blog/assets/js/12.304ee69c.js"><link rel="prefetch" href="/blog/assets/js/14.107077f8.js"><link rel="prefetch" href="/blog/assets/js/5.e9ff4345.js"><link rel="prefetch" href="/blog/assets/js/6.31fffafe.js"><link rel="prefetch" href="/blog/assets/js/7.da59afe4.js"><link rel="prefetch" href="/blog/assets/js/8.19f00d27.js"><link rel="prefetch" href="/blog/assets/js/vendors~flowchart.8cc5d160.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.e168caf7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-dad8a512><div data-v-dad8a512><LoadingPage class="loading-wrapper" data-v-dad8a512 data-v-dad8a512></LoadingPage> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-dad8a512 data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>QiJieH's Blog</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>QiJieH</span>
            
          <!---->
          2020
        </a></span></div></div> <div class="hide" data-v-dad8a512><header class="navbar" data-v-dad8a512><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/web-img/author.jpg" alt="QiJieH's Blog" class="logo"> <span class="site-name">QiJieH's Blog</span></a> <div class="links"><!----> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask" data-v-dad8a512></div> <aside class="sidebar" data-v-dad8a512><div class="personal-info-wrapper" data-v-ca798c94 data-v-dad8a512><img src="/blog/web-img/author.jpg" alt="author-avatar" class="personal-img" data-v-ca798c94> <h3 class="name" data-v-ca798c94>
    QiJieH
  </h3> <div class="num" data-v-ca798c94><div data-v-ca798c94><h3 data-v-ca798c94>1</h3> <h6 data-v-ca798c94>Article</h6></div> <div data-v-ca798c94><h3 data-v-ca798c94>6</h3> <h6 data-v-ca798c94>Tag</h6></div></div> <hr data-v-ca798c94></div> <!----> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>依托于GithubPages的Vuepress静态博客GithubAction自动部署方案</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>QiJieH</span>
            
          <!---->
          2020
        </a></span></div></div> <div data-v-dad8a512><main class="page"><div class="page-title" style="display:none;"><h1>依托于GithubPages的Vuepress静态博客GithubAction自动部署方案</h1> <hr> <div data-v-aa64b9d0><i class="iconfont reco-account" data-v-aa64b9d0><span data-v-aa64b9d0>QiJieH</span></i> <i class="iconfont reco-date" data-v-aa64b9d0><span data-v-aa64b9d0>2020-08-01</span></i> <!----> <i class="iconfont reco-tag tags" data-v-aa64b9d0><span class="tag-item" data-v-aa64b9d0>Github Pages</span><span class="tag-item" data-v-aa64b9d0>Github Action</span><span class="tag-item" data-v-aa64b9d0>Vuepress</span><span class="tag-item" data-v-aa64b9d0>Github</span><span class="tag-item" data-v-aa64b9d0>Gitee</span><span class="tag-item" data-v-aa64b9d0>Git</span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><p>博客发表流程：</p> <ol><li>项目文件下新建 Markdown 文章</li> <li><code>git push</code></li></ol> <p>Github &amp; Gitee 双端自动部署。</p> <h2 id="开始之前"><a href="#开始之前" class="header-anchor">#</a> 开始之前</h2> <blockquote><p>这是我的第一个博客网站，前后花费了差不多一个星期，期间参考了大量博文，文档。</p> <p>总结建站前后的经验写下第一篇关于本博客的部署教程的博文，希望能够帮助和我一样摸索建站的人。</p> <p>​																																									——于朝阳升起处，我将踏上旅程</p></blockquote> <p><strong>项目描述</strong></p> <ul><li><p>一个基于 Vuepress 第三方主题 vuepress-theme-reco 搭建的静态博客</p></li> <li><p>托管项目代码在 Github 仓库，并使用 Github Pages 服务运行网站。</p></li> <li><p>使用 Github Action 实现自动编译部署。</p></li> <li><p>使用 Github Action 实现同步推送仓库代码至 Gitee 和更新 Gitee Pages 服务。</p></li></ul> <blockquote><p>Github My Blog : <a href="https://qijieh.github.io/blog" target="_blank" rel="noopener noreferrer">https://qijieh.github.io/blog<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Gitee My Blog : <a href="https://qijieh.gitee.io/blog" target="_blank" rel="noopener noreferrer">https://qijieh.gitee.io/blog<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p><strong>项目优越</strong></p> <ul><li>纯静态页面，无需后台数据库。</li> <li>Github Pages 服务，无需单独服务器。</li> <li>Git 更新，管理网站。</li> <li>Github Action 自动部署，专注写作。</li> <li>Gitee 同步推送，自动更新 Gitee Pages , 更好的国内访问体验</li></ul> <p><strong>项目技术</strong></p> <p>本项目使用 Vuepress 第三方主题 vuepress-theme-reco 构建，在开始之前你应该对 Vuepress 有一个基本了解，并对其构建流程有一定的初步掌握。</p> <p>强烈建议按照官方文档在个人电脑上构建一个官方的 Vuepress 项目，以便更好的开始使用接下来的 Vuepress 第三方博客主题。</p> <p>除此之外，你还需要掌握基本的 Git 使用方法以及对 Github 仓库各项配置的理解和使用，包括 Github Action 的初步认知。</p> <blockquote><p><a href="https://www.vuepress.cn/" target="_blank" rel="noopener noreferrer">Vuepress 中文文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://vuepress-theme-reco.recoluan.com/" target="_blank" rel="noopener noreferrer">vuepress-theme-reco 官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html" target="_blank" rel="noopener noreferrer">阮一峰 GitHub Actions 入门教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h2 id="快速开始"><a href="#快速开始" class="header-anchor">#</a> 快速开始</h2> <p><strong>npx</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>npx @vuepress-reco/theme-cli init
</code></pre></div><p><strong>npm</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 初始化</span>
<span class="token function">npm</span> <span class="token function">install</span> @vuepress-reco/theme-cli -g
theme-cli init
</code></pre></div><p><strong>yarn</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 初始化</span>
<span class="token function">yarn</span> global <span class="token function">add</span> @vuepress-reco/theme-cli
theme-cli init
</code></pre></div><p>一切就绪后按照提示，进入项目目录，并安装依赖 (本文之后都将使用 npm 进行管理)</p> <div class="language-powershell extra-class"><pre class="language-powershell"><code><span class="token comment"># 进入项目目录</span>
cd my<span class="token operator">-</span>blog
<span class="token comment"># 安装依赖</span>
npm install
</code></pre></div><p>通过命令行键入以下命令，并访问监听端口即可查看网站</p> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm run dev
</code></pre></div><img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200804232214.png" alt="默认Demo样式" style="width:800px;border:solid 3px #eaecef;"> <h2 id="修改配置"><a href="#修改配置" class="header-anchor">#</a> 修改配置</h2> <p>网站的各项信息配置存储在了 <code>.vuepress/config.js</code></p> <p>通过修改 <code>config.js</code> 文件，你可以修改替换网站的大部分预设内容，如 网站标题，logo图标，导航栏Tab选项卡等等。</p> <p><code>.vuepress/config.js</code> 可以分为以下几个部分</p> <ul><li>基本配置 <code>title</code> <code>description</code> 等等</li> <li>主题配置 <code>theme</code> <code>themeConfig</code></li> <li>插件配置 <code>plugins</code></li> <li>Markdown 配置 <code>markdown</code></li></ul> <p>其中的各项属性说明和配置方法你均可在 <a href="https://www.vuepress.cn/config/" target="_blank" rel="noopener noreferrer">Vuepress 配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，<a href="https://www.vuepress.cn/theme/default-theme-config.html" target="_blank" rel="noopener noreferrer">Vuepress 默认主题配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和 <a href="https://vuepress-theme-reco.recoluan.com/views/1.x/configJs.html" target="_blank" rel="noopener noreferrer">reco Config.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中查询得到。</p> <p>请自行参考文档说明替换相应属性值。</p> <blockquote><p>网站的静态资源存储在了 <code>.vuepress/public</code> 目录下，其设定了全局的相对路径，你只需要以 <code>/</code> 开头对其进行直接引用。</p> <p>比如替换网站的 logo 图片为 <code>.vuepress/public/web-img/logo.png</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// .vuepress/config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  themeConfig<span class="token operator">:</span> <span class="token punctuation">{</span>
    logo<span class="token operator">:</span> <span class="token string">'web-img/logo.png'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></blockquote> <blockquote><p>关于主题的夜间模式配置请单独参考：</p> <p><a href="https://vuepress-theme-reco.recoluan.com/views/1.x/mode.html" target="_blank" rel="noopener noreferrer">暗色模式适配<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>404 腾讯公益关闭方法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// .vuepress/config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  theme<span class="token operator">:</span> <span class="token string">'reco'</span><span class="token punctuation">,</span>
  themeConfig<span class="token operator">:</span> <span class="token punctuation">{</span>
    noFoundPageByTencent<span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>
</code></pre></div></blockquote> <p>这里需要额外注意 base 和 dest 属性：</p> <p><strong>base</strong></p> <ul><li>类型: <code>string</code></li> <li>默认值: <code>/</code></li></ul> <p>部署站点的基础路径，如果你想让你的网站部署到一个子路径下，你将需要设置它。如 GitHub pages，如果你想将你的网站部署到 <code>https://foo.github.io/bar/</code>，那么 <code>base</code> 应该被设置成 <code>&quot;/bar/&quot;</code>，它的值应当总是以斜杠开始，并以斜杠结束。</p> <p><code>base</code> 将会作为前缀自动地插入到所有以 <code>/</code> 开始的其他选项的链接中，所以你只需要指定一次。</p> <p><strong>dest</strong></p> <ul><li>类型: <code>string</code></li> <li>默认值: <code>.vuepress/dist</code></li></ul> <p>指定 <code>vuepress build</code> 的输出目录。如果传入的是相对路径，则会基于 <code>process.cwd()</code> 进行解析。</p> <p>此处先做提醒可不做添加或修改，在 部署上线 步骤中再做详细讲解。</p> <p>运行命令，查看修改</p> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm run dev
</code></pre></div><img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200805152255.png" alt="个人信息注入" style="width:800px;border:solid 3px #eaecef;"> <h2 id="首页配置"><a href="#首页配置" class="header-anchor">#</a> 首页配置</h2> <p>更换博客首页的 Banner 或 slogan 是单独在项目根目录下的 <code>README.md</code> 文件进行的。</p> <p>由于 <a href="https://vuepress-theme-reco.recoluan.com/views/1.x/home.html" target="_blank" rel="noopener noreferrer">reco 首页配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 已经详细介绍，这里不再进行赘述。</p> <blockquote><p>reco 提供了三种首页样式，在 npx reco主题时，提供了选择支。</p> <ul><li>blog式</li> <li>文档式</li> <li>午后南杂</li></ul> <p>如果你需要从文档式切换至blog式，只需修改 <code>.vuepress/config.js</code> 主题配置的 <code>type</code> 属性</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// .vuepress/config.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  theme<span class="token operator">:</span> <span class="token string">'reco'</span><span class="token punctuation">,</span>
  themeConfig<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'blog'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></blockquote> <p>修改完成后，运行命令，查看修改</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>npm run dev
</code></pre></div><img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200805155833.png" alt="首页图片和Slogan" style="width:800px;border:solid 3px #eaecef;"> <h2 id="自定样式"><a href="#自定样式" class="header-anchor">#</a> 自定样式</h2> <p>如果你不满足于主题提供的默认样式，VuePress 提供了一些简单的接口文件，可以让你能够很方便地定制你自己想要的效果。</p> <h3 id="修改主题颜色"><a href="#修改主题颜色" class="header-anchor">#</a> 修改主题颜色</h3> <p>你可以通过配置 <code>.vuepress/styles/palette.styl</code> （手动创建）来快速修改主题的一些颜色属性。</p> <div class="language-stylus extra-class"><pre class="language-stylus"><code><span class="token comment">// 默认值</span>
<span class="token variable-declaration"><span class="token variable">$accentColor</span> <span class="token operator">=</span> <span class="token hexcode">#3eaf7c</span>                      </span><span class="token comment">// 主题颜色</span>
<span class="token variable-declaration"><span class="token variable">$textColor</span> <span class="token operator">=</span> <span class="token hexcode">#2c3e50</span>                        </span><span class="token comment">// 文本颜色</span>
<span class="token variable-declaration"><span class="token variable">$borderColor</span> <span class="token operator">=</span> <span class="token hexcode">#eaecef</span>                      </span><span class="token comment">// 边框线颜色</span>
<span class="token variable-declaration"><span class="token variable">$codeBgColor</span> <span class="token operator">=</span> <span class="token hexcode">#282c34</span>                      </span><span class="token comment">// 代码块背景色</span>
<span class="token variable-declaration"><span class="token variable">$backgroundColor</span> <span class="token operator">=</span> <span class="token hexcode">#ffffff</span>                  </span><span class="token comment">// 悬浮块背景色</span>
</code></pre></div><blockquote><p>色彩网站：<a href="https://nipponcolors.com/" target="_blank" rel="noopener noreferrer">日式传统色<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>测试配色可读性：<a href="https://color.review/" target="_blank" rel="noopener noreferrer">Color.review<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h3 id="修改主题样式"><a href="#修改主题样式" class="header-anchor">#</a> 修改主题样式</h3> <p>你可以创建一个 <code>.vuepress/styles/index.styl</code>文件以方便地添加额外样式。这是一个 Stylus 文件，但你也可以使用正常的 CSS 语法。</p> <p>在网站任何可以访问的页面都可以通过 <code>index.styl</code> 文件书写 CSS 样式，通过<strong>浏览器开发者工具</strong>我们能够十分轻松的选择元素并添加或修改样式。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/** .vuepress/styles/index.styl **/</span>

<span class="token selector">// 修改网页背景色，增强可读性
body</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #f2f2f2 <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">// 修改导航栏搜索框圆弧化
.search-box input</span> <span class="token punctuation">{</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 1.25rem <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">// 博文 box 背景
.page-title,
.theme-reco-content</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #ffffff<span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 0.25rem<span class="token punctuation">;</span>
    <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--box-shadow<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> solid 1px <span class="token function">var</span><span class="token punctuation">(</span>--border-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">// 分离博文标题与内容
.page-title</span> <span class="token punctuation">{</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 32px<span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

...
</code></pre></div><blockquote><p>如果你对样式修改没有头绪可以参考其他使用 reco主题的博客样式并自行修改</p> <p><a href="https://vuepress-theme-reco.recoluan.com/views/other/theme-example.html" target="_blank" rel="noopener noreferrer">reco 优秀博客案例<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>如果你需要本博客的自定义样式，可以访问博客仓库</p> <p><a href="https://github.com/QiJieH/blog" target="_blank" rel="noopener noreferrer">qijieh/blog<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>运行 <code>npm run dev</code> 查看我们修改的样式</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200805160856.png" alt="默认Demo样式" style="width:800px;border:solid 3px #eaecef;"> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200805161235.png" alt="默认Demo样式" style="width:800px;border:solid 3px #eaecef;"> <h3 id="引用脚本与样式"><a href="#引用脚本与样式" class="header-anchor">#</a> 引用脚本与样式</h3> <p>你可以通过配置 <code>.vuepress/config.js</code> 中的 <code>head</code> 来引入自己的js脚本与样式。</p> <p>通过外挂css和js来对主题样式曾铁，例如点击效果，花瓣雨等等特效。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// .vuepress/config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  head<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;link&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> rel<span class="token operator">:</span> <span class="token string">&quot;stylesheet&quot;</span><span class="token punctuation">,</span> href<span class="token operator">:</span> <span class="token string">&quot;https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> src<span class="token operator">:</span> <span class="token string">&quot;scripts/demo.js&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>比如上面的配置就会被解析为</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>scripts/demo.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>关于 <code>head</code> 的详细配置说明请参考<a href="https://v1.vuepress.vuejs.org/zh/config/#head" target="_blank" rel="noopener noreferrer">官方文档 head 配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>以引入鼠标点击效果为例：</strong></p> <p>在<code>.vuepress\public\js</code>文件夹下创建<code>MouseClickEffect.js</code>文件，填入以下代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a_idx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getRandom</span><span class="token punctuation">(</span><span class="token parameter">max<span class="token punctuation">,</span> min</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max <span class="token operator">-</span> min <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> min<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">jQuery</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">$</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token string">&quot;富强&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;民主&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;文明&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;和谐&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;自由&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;平等&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;公正&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;法治&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;爱国&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;敬业&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;诚信&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;友善&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> $i <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;span/&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>a_idx<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a_idx <span class="token operator">=</span> <span class="token punctuation">(</span>a_idx <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">var</span> x <span class="token operator">=</span> e<span class="token punctuation">.</span>pageX<span class="token punctuation">,</span>
            y <span class="token operator">=</span> e<span class="token punctuation">.</span>pageY<span class="token punctuation">;</span>
        $i<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token string">&quot;z-index&quot;</span><span class="token operator">:</span> <span class="token number">999999999999999999999999999999999999999999999999999999999999999999999</span><span class="token punctuation">,</span>
            <span class="token string">&quot;top&quot;</span><span class="token operator">:</span> y <span class="token operator">-</span> <span class="token number">20</span><span class="token punctuation">,</span>
            <span class="token string">&quot;left&quot;</span><span class="token operator">:</span> x<span class="token punctuation">,</span>
            <span class="token string">&quot;position&quot;</span><span class="token operator">:</span> <span class="token string">&quot;absolute&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;font-weight&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bold&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;color&quot;</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">rgb(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">getRandom</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">getRandom</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">getRandom</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            <span class="token string">&quot;user-select&quot;</span><span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
            <span class="token string">&quot;cursor&quot;</span><span class="token operator">:</span> <span class="token string">'default'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>$i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        $i<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token string">&quot;top&quot;</span><span class="token operator">:</span> y <span class="token operator">-</span> <span class="token number">180</span><span class="token punctuation">,</span>
                <span class="token string">&quot;opacity&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token number">1500</span><span class="token punctuation">,</span>
            <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                $i<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>然后在主题配置文件<code>config.js</code>下的<code>head</code>引入以上js，这里的jquery必须引入，鼠标点击代码才能生效</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// .vuepress/config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	head<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 网页标签栏图标</span>
    <span class="token punctuation">[</span><span class="token string">'link'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> rel<span class="token operator">:</span> <span class="token string">'icon'</span><span class="token punctuation">,</span> href<span class="token operator">:</span> <span class="token string">'/vuepress/favicon.ico'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 移动栏优化</span>
    <span class="token punctuation">[</span><span class="token string">'meta'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'viewport'</span><span class="token punctuation">,</span> content<span class="token operator">:</span> <span class="token string">'width=device-width,initial-scale=1,user-scalable=no'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 引入jquery</span>
    <span class="token punctuation">[</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;language&quot;</span><span class="token operator">:</span> <span class="token string">&quot;javascript&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text/javascript&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;src&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 引入鼠标点击脚本</span>
    <span class="token punctuation">[</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;language&quot;</span><span class="token operator">:</span> <span class="token string">&quot;javascript&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;text/javascript&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;src&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/js/MouseClickEffect.js&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>参考博文：<a href="https://vuepress-theme-reco.recoluan.com/views/other/reco-optimization.html" target="_blank" rel="noopener noreferrer">vuepress-theme-reco个人向优化<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h2 id="添加文章"><a href="#添加文章" class="header-anchor">#</a> 添加文章</h2> <p>在开始插件配置之前，先向网站添加几篇文章。</p> <p>通过查看项目目录不难发现博客文章被存储在了 <code>blogs</code>  下，除此之外还有另外一个名为 <code>docs</code> 的目录存储文档文件。如果你的博客网站不需要文档类型的博文，可以删除改 <code>docs</code> 目录并删除 <code>config.js</code> 中的 <code>themeConfig &gt; nav</code> 中的 Docs Tab选项。</p> <p>在 <a href="https://vuepress-theme-reco.recoluan.com/views/other/question.htm" target="_blank" rel="noopener noreferrer">reco issue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中提到：</p> <blockquote><p>Q：文章的存放位置有规定吗？</p> <p>A：你可以将你的文章存放在任意位置，但是你需要保证它是 VuePress 可以解析的位置，比如你使用的命令是 <code>vuepress dev docs</code> ，那么请将所有文章存放在 <code>docs/</code> 中，但是主题并不会强制你放在哪个子目录，这个按照你的喜好来即可，详情见 <a href="https://vuepress.vuejs.org/zh/guide/directory-structure.html" target="_blank" rel="noopener noreferrer">详细的 VuePress 目录结构配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p></blockquote> <p>尽管主题对文章存放位置没有硬性要求，但是你的项目结构应该保持整洁，建议沿用默认的存储路径。</p> <p>比如有当前一篇文章 <code>Vue框架学习记录.md</code> 拥有以下 Front Matter ：</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token key atrule">title</span><span class="token punctuation">:</span> Vue框架学习记录
<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2020-08-05</span>
<span class="token key atrule">categories</span><span class="token punctuation">:</span>
 <span class="token punctuation">-</span> FrontEnd
<span class="token key atrule">tags</span><span class="token punctuation">:</span>
 <span class="token punctuation">-</span> Vue
<span class="token punctuation">---</span>
</code></pre></div><p>那么它的存储路径应该为 <code>blogs/FrontEnd/2020-8/Vue框架学习记录.md</code> 。</p> <blockquote><p>主题不会根据你的文件路径来进行文章分类，而是对 Markdown 文件的 Front Matter 中的相关标签进行分类解析。</p> <p>但是为了保持项目结构整洁请务必设置路径为分类名称。</p> <p><a href="https://vuepress.vuejs.org/zh/guide/frontmatter.htm" target="_blank" rel="noopener noreferrer">Vuepress Front Matter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://vuepress-theme-reco.recoluan.com/views/1.x/frontMatter.html" target="_blank" rel="noopener noreferrer">reco Front Matter 示例<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>根据具体场景新建md文章，并修改存储路径。删除主题的测试文章，添加一篇自己的测试博文 （建议长度一定，拥有标题结构和代码块，方便后期测试）。</p> <p>这是一个博文存储结构的示例：</p> <div class="language- extra-class"><pre><code>blogs
├── FrontEnd
│   ├── 2020-8
│   │   └── article01.md
│   └── 2020-7
├── Java
│   ├── 2020-8
│   └── 2020-7
└── Python
</code></pre></div><blockquote><p>向文章添加摘要，显示在博文列表中</p> <div class="language- extra-class"><pre class="language-text"><code>这是摘要，在 more 标签之前的内容会展示到博文列表上
**支持md语法**
&lt;!-- more --&gt;
</code></pre></div><p><a href="https://vuepress-theme-reco.recoluan.com/views/1.x/abstract.html" target="_blank" rel="noopener noreferrer">reco 添加摘要<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>更多 Vuepress Markdown 支持语法请查看：</p> <p><a href="https://www.vuepress.cn/guide/markdown.html" target="_blank" rel="noopener noreferrer">Vuepress Markdown扩展<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p><strong>添加完成后，运行命令，查看添加成功与否</strong></p> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm run dev
</code></pre></div><img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200805174613.png" alt="博文列表" style="width:800px;border:solid 3px #eaecef;"> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200805174844.png" alt="博文页面" style="width:800px;border:solid 3px #eaecef;"> <h2 id="插件配置"><a href="#插件配置" class="header-anchor">#</a> 插件配置</h2> <p>关于插件的配置语法 <a href="https://www.vuepress.cn/plugin/" target="_blank" rel="noopener noreferrer">Vuepress 插件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中已经详细说明，请自行参考文档了解其语法和使用方法。</p> <p>至此一个完整的博客已经配置出来，但是如果你需要其他需求如 背景音乐播放器，live2d看板娘，代码快捷复制， markdown语法扩展等等，可以通过导入第三方插件来完善你的博客。</p> <p>reco 主题已经内置了一些实用的插件，这些插件已经完全足够博客基本功能。<a href="https://vuepress-theme-reco.recoluan.com/views/plugins/" target="_blank" rel="noopener noreferrer">点击查看<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>但是你依旧可以通过访问 <a href="https://github.com/vuepressjs/awesome-vuepress#plugins" target="_blank" rel="noopener noreferrer">vuepress插件社区<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 或 <a href="https://vuepress-theme-reco.recoluan.com/views/other/recommend.html" target="_blank" rel="noopener noreferrer">reco主题插件广场<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来新添插件。</p> <blockquote><p>你可以通过这种方式来对主题内置插件的配置进行覆盖，甚至禁用一个内置插件</p> <p>只需将 Options 设置成 <code>false</code> 便可禁用该插件</p> <p>就像这样</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;@vuepress-reco/vuepress-plugin-loading-page&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">]</span><span class="token punctuation">,</span>     <span class="token comment">// 禁用加载页面</span>
    <span class="token punctuation">[</span><span class="token string">&quot;@vuepress-reco/vuepress-plugin-back-to-top&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 返回顶部按钮</span>
    	visibilityHeight<span class="token operator">:</span> <span class="token number">500</span>	<span class="token comment">// 覆盖其默认配置，重新设置为出现高度为 500</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></blockquote> <p><strong>接下来引入一个音乐播放器插件 <a href="https://github.com/moefyit/vuepress-plugin-meting" target="_blank" rel="noopener noreferrer">meting<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 做为示例</strong></p> <ol><li>install 插件</li></ol> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm install vuepress<span class="token operator">-</span>plugin<span class="token operator">-</span>meting <span class="token operator">-</span>D
</code></pre></div><ol start="2"><li>在 <code>.vuepress/config.js</code> 文件中引入插件并按照插件文档配置相关属性</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// .vuepress/config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    
<span class="token comment">//....</span>
    
<span class="token string">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&quot;meting&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        meting<span class="token operator">:</span> <span class="token punctuation">{</span>
          auto<span class="token operator">:</span> <span class="token string">&quot;https://music.163.com/#/playlist?id=5156784198&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        aplayer<span class="token operator">:</span> <span class="token punctuation">{</span>
          lrcType<span class="token operator">:</span> <span class="token number">0</span> 	<span class="token comment">//禁用歌词显示</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        mobile<span class="token operator">:</span> <span class="token punctuation">{</span>		<span class="token comment">// 移动端设置</span>
          cover<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 取消封面覆盖</span>
          lrc<span class="token operator">:</span> <span class="token boolean">false</span>	<span class="token comment">// 禁用歌词显示</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
    
<span class="token comment">//...</span>
    
<span class="token punctuation">}</span>

</code></pre></div><ol start="3"><li><code>npm run dev</code> 查看效果</li></ol> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200805180316.png" alt="meting播放器" style="width:800px;border:solid 3px #eaecef;"> <blockquote><p>对于新增的播放器，你也可以通过 <code>.vuepress/styles/index.styl</code> 来为其修改样式</p> <p>在浏览器通过<strong>开发者工具</strong>选中播放器，查看元素类名</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.aplayer-body</span> <span class="token punctuation">{</span>
    <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--box-shadow<span class="token punctuation">)</span> <span class="token important">!important</span><span class="token punctuation">;</span> // 为播放器添加阴影
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://www.vuepress.cn/zh/config/#styling" target="_blank" rel="noopener noreferrer">Vuepress Styling<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>下面将列出推荐的插件链接：</p> <ul><li><a href="https://github.com/moefyit/vuepress-plugin-meting" target="_blank" rel="noopener noreferrer">meting<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ：简单易用的播放器插件，支持自动解析网易云单曲/歌单链接</li> <li><a href="https://www.vuepress.cn/plugin/official/plugin-pwa.html" target="_blank" rel="noopener noreferrer">@vuepress/pwa<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ：网页内容更新提醒</li> <li><a href="https://www.npmjs.com/package/vuepress-plugin-nuggets-style-copy" target="_blank" rel="noopener noreferrer">vuepress-plugin-nuggets-style-copy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ：为代码块添加复杂按钮，并在复制成功后弹出提示信息</li> <li><a href="https://github.com/ulivz/vuepress-plugin-flowchart" target="_blank" rel="noopener noreferrer">flowechart<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ：使你的 Markdown 支持 flow 流程图</li> <li><a href="https://github.com/tolking/vuepress-plugin-img-lazy" target="_blank" rel="noopener noreferrer">img-lazy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ：图片惰性加载</li> <li><a href="https://vuepress.github.io/zh/plugins/copyright/" target="_blank" rel="noopener noreferrer">copyright<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ：控制网站的复制行为</li> <li><a href="https://vuepress.github.io/zh/plugins/smooth-scroll" target="_blank" rel="noopener noreferrer">vuepress-plugin-smooth-scroll<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ：更圆滑的页面滚动</li></ul> <p>插件的安装引入大同小异，请自行参照插件文档进行配置。</p> <p><strong>由于评论插件 Vssue （ 已集合到 reco 自带插件 <a href="https://vuepress-theme-reco.recoluan.com/views/plugins/comments.html" target="_blank" rel="noopener noreferrer">comments<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中）的特殊性（需要配置项目仓库）将放在 部署上线 之后再进行配置</strong></p> <h2 id="部署上线"><a href="#部署上线" class="header-anchor">#</a> 部署上线</h2> <p>在正式开始部署上线之前，你应该对 vuepress 的构建流程有一个大致了解。</p> <p>之前我们使用的 <code>npm run dev</code> 模式运行了 vuepress 的开发模式，这个模式下是不会产生我们需要的静态资源的。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token comment">// packages.json</span>
<span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
    <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    	<span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress dev .&quot;</span><span class="token punctuation">,</span>
    	<span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress build .&quot;</span>
  	<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>只有运行 <code>npm run build</code> 时才会在指定目录下构建出我们的博客网页</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// .vuepress/config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    	<span class="token string">&quot;dest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.vuepress/dist&quot;</span>   <span class="token comment">// 指定 vuepress build 的输出目录</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>命令行运行 <code>npm run build</code> ，检查在 <code>.vuepress/dist</code> 下是否能构建出资源文件。</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200805193936.png" alt="网页源码目录" style="border:solid 3px #eaecef;"> <blockquote><p>Error: cannot find module '../dist/manifest/client.json'</p> <p>如果在构建过程中出现此项错误，你的系统环境变量中可能设置了 <code>NODE_ENV : development</code> 将其修改为 <code>NODE_ENV ：production</code> 即可。</p> <p>详情查看 <a href="https://github.com/vuejs/vuepress/issues/2194" target="_blank" rel="noopener noreferrer">vue.js issue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h3 id="双端部署"><a href="#双端部署" class="header-anchor">#</a> 双端部署</h3> <p>本博客同时部署到了 Github 和 Gitee 上，你可以尝试访问</p> <blockquote><p>Github My Blog : <a href="https://qijieh.github.io/blog" target="_blank" rel="noopener noreferrer">https://qijieh.github.io/blog<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Gitee My Blog : <a href="https://qijieh.gitee.io/blog" target="_blank" rel="noopener noreferrer">https://qijieh.gitee.io/blog<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p><strong>在此之前你应该明白 Github 和 Gitee 的 Pages 服务差异</strong></p> <blockquote><p>Github 允许用户使用个人域名即 <code>https://[userName].github.io</code> ，只需要在创建仓库时将仓库命名为 <code>[userName].github.io</code> 即可</p> <p>但是 Gitee 却不允许用户使用个人域名，即无论创建仓库命名为何，都只能指向 <code>https://[userName].gitee.io/[repoName]</code></p></blockquote> <p>这种差异增加了我们博客双端部署的难度，因为 Vuepress 对于部署到非根路径的项目有着相应配置参考 <a href="https://www.vuepress.cn/guide/assets.html" target="_blank" rel="noopener noreferrer">基础路径<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，如果对部署到二级路径的项目没有设置 <code>config.js</code> 文件中的 <code>base</code> 值，将会导致网页资源的错误加载。</p> <p>综上所述，为了保持项目的一致性我们不得不放弃使用 Github 提供的个人域名，去与 Gitee 保持一致使用二级域名，这也是为什么上方两个博客链接都不是非根路径的原因所在。</p> <div class="custom-block tip"><p>如果你只需要部署到一个平台，请酌情参考本博文。</p></div> <p><strong>新建仓库</strong></p> <p>登录 Github 新建仓库，仓库命名自定，本博文以 <code>blog</code> 命名仓库。</p> <blockquote><p>如果你需要进行双端部署切勿命名为 <code>[userName].github.io</code> ，详见上方说明。</p> <p>如果你只想部署在 Github 推荐以 <code>[userName].github.io</code> 命名。</p></blockquote> <blockquote><p>其实命名为 <code>blog</code>  会导致博客 Url 混乱，因为reco主题的 router 设置了 /blogs/ 路由，将会导致出现这样的访问链接：</p> <p><code>https://qijieh.github.io/blog/blogs/FrontEnd/2020-8/article.html</code></p> <p>建议命名为：<code>space</code> ，<code>personal</code> ，<code>room</code> 等等</p></blockquote> <p>登录 Gitee 新建仓库，建议仓库名与 Github 仓库名一致，方便访问。</p> <p><strong>部署方式</strong></p> <p>部署方式分为两种 手动部署 和 自动部署，两种部署方式唯一的区别在于是否需要本地编译 <code>npm run build</code> 出网页源码。</p> <p>其详细流程如下：</p> <ul><li>手动部署 （易）
<ol><li>书写博文 或 修改主题</li> <li>构建网页文件 <code>npm run build</code></li> <li><code>git push</code></li></ol></li> <li>自动部署 （难）
<ol><li>书写博文 或 修改主题</li> <li><code>git push</code></li></ol></li></ul> <blockquote><p>自动部署会在服务器端进行网页的构建和编译 <code>npm run build</code>，而不是在开发机上，管理员只需要专注于文章写作，构建部署工作全部交由服务器端完成。</p> <p>尽管自动部署方案在实行时可能会花费大量时间成本，但是仍然建议你使用自动部署方案，感受 Github Action 的强大之处，并且其一旦完成，后期的维护成本将明显降低。</p></blockquote> <div class="custom-block warning"><p>注意！！！只有自动部署方案才能实现 Gitee 的代码同步和 GiteePages 的自动更新，如果你需要将你的博客网站如同本博客一样在双平台自动部署，请参考自动部署方案。</p></div> <h3 id="手动部署"><a href="#手动部署" class="header-anchor">#</a> 手动部署</h3> <p>由于 GithubPages 服务的渲染目录只预设了 <code>root</code> 和 <code>docs</code> ，我们得<strong>重新指定 build 的输出目录，将其重新设定为 <code>docs</code></strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// .vuepress/config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    	<span class="token string">&quot;dest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;docs&quot;</span>  <span class="token comment">// vuepress 生成目录</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样 <code>npm run build</code> 的文件便会生成在 <code>docs</code> 目录下。</p> <p><strong>构建并上传</strong></p> <div class="language- extra-class"><pre class="language-text"><code>// 确保在项目根目录
npm run build
.....
build success

git init
.....
git push
</code></pre></div><blockquote><p>注意新建 <code>.gitignore</code> 文件</p> <div class="language- extra-class"><pre class="language-text"><code>node_modules/
</code></pre></div></blockquote> <p>上传完成之后，我们需要打开 Github 仓库页面，配置项目的 GithubPages 服务。</p> <p>点击 仓库Setting 下拉找到 GithuPages 在 Source 中设置如下</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200805210322.png" alt="GithubPages设置" style="border:solid 3px #eaecef;"> <p>注意设置为 <code>/docs</code> 目录，而不是默认的 <code>/root</code> ，这样 GithubPages 就会解析我们 <code>/docs</code>  目录下的博客网页了。</p> <p>现在点击上方的网址访问你的博客吧。</p> <p><strong>现在你的博客发布流程为：</strong></p> <ol><li>写博客 或 修改主题</li> <li><code>npm run build</code></li> <li><code>git push</code></li></ol> <p><strong>Gitee 同步解决方案</strong></p> <div class="custom-block warning"><p>手动部署方案适合单仓库部署，如果你执意双端部署将会明显提高维护成本。</p></div> <ol><li>打开创建的 Gitee 仓库  <strong>管理 &gt; 基本设置 &gt; 仓库远程地址</strong> 输入 Github 的仓库地址</li></ol> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200805211042.png" alt="Gitee同步设置" style="width:750px;border:solid 3px #eaecef;"> <ol start="2"><li>返回仓库代码页，<strong>点击仓库名旁边的同步按钮完成推送</strong></li></ol> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200805211244.png" alt="Gitee点击同步" style="width:750px;border:solid 3px #eaecef;"> <ol start="3"><li>这样 Github 仓库的代码便会同步至该仓库下，接下来只需要开启该仓库的 Gitee Pages 服务 ：<strong>服务 &gt; Gitee Pages</strong></li></ol> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200805211627.png" alt="GiteePages服务设置" style="width:750px;border:solid 3px #eaecef;"> <ol start="4"><li>点击链接访问你的网站吧。</li></ol> <p><strong>为什么不推荐手动部署的双端托管？</strong></p> <ul><li>首先你得知道 Gitee 仓库的同步功能是不支持自动同步的，也就是说，即使你更新了 Github 仓库的代码，Gitee 这边仍然需要你过来手动点击同步按钮来更新同步。</li> <li>同样糟糕的是 Gitee Pages 服务和 Github Pages 服务不同，使用 GitHub Pages 时，每当项目有更新，GitHub 会自动帮我们重新部署 GitHub Pages。而 Gitee Pages 则不会如此，它仍需要你点击 Pages 服务的更新按钮来刷新内容！或者开通 Gitee Pages Pro 功能。而 Pro 功能的开通，需要满足以下其中一个条件：
<ul><li>花钱开通 Pro 功能，￥99/年。</li> <li>Gitee 项目足够优秀，得到 Gitee 官方的推荐，那么 Gitee 就会提示“您的项目为推荐项目，已自动为您开通 Gitee Pages Pro。</li></ul></li></ul> <p>这样将意为着每次你在 Github 轻松完成了<code>git push</code> ，你仍然需要登录你的 Gitee 仓库点击强制同步按钮拉取代码，再去点击 Pages 服务的刷新按钮更新网页。</p> <p><strong>手动部署双端托管的博客发布流程：</strong></p> <ol><li>写文章</li> <li><code>npm run build</code></li> <li><code>git push</code></li> <li>登录 Gitee 仓库</li> <li>点击强制同步按钮</li> <li>点击 Pages 服务的更新按钮</li></ol> <p>显然这是十分不友好的，但是当你只部署在 Github 平台上时就可以不用管 Gitee 了。</p> <h3 id="自动部署"><a href="#自动部署" class="header-anchor">#</a> 自动部署</h3> <p>如果你阅读了上方手动部署的解决方案，可以深感其的不便性，特别是进行 Github 和 Gitee 双平台托管的场景时。</p> <p>接下来的部署方案，将让你从繁杂的提交流程中抽离出来，让你更加专注博客内容，而不是操心与网站的部署。</p> <p>现在我们在 Github 和 Gitee 上各拥有一个 blog 仓库，而我们的自动部署方案将在 Github 上进行，借助于 Github Action 我们能够优雅的实现两个仓库的自动同步更新。</p> <h4 id="初识githubaction"><a href="#初识githubaction" class="header-anchor">#</a> 初识GithubAction</h4> <p><a href="https://github.com/features/actions" target="_blank" rel="noopener noreferrer">GitHub Actions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是 GitHub 的<a href="http://www.ruanyifeng.com/blog/2015/09/continuous-integration.html" target="_blank" rel="noopener noreferrer">持续集成服务<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，于2018年10月推出。</p> <blockquote><h1 id="automate-your-workflow-from-idea-to-production"><a href="#automate-your-workflow-from-idea-to-production" class="header-anchor">#</a> Automate your workflow from idea to production</h1> <p>GitHub Actions makes it easy to automate all your software workflows, now with world-class CI/CD. Build, test, and deploy your code right from GitHub. Make code reviews, branch management, and issue triaging work the way you want.</p></blockquote> <p>关于 Github Action 的初步入门教程可以参考 <a href="http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html" target="_blank" rel="noopener noreferrer">阮一峰 GitHub Actions 入门教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，其中也大致介绍了什么是 Github Action 。</p> <p>如果你对 Github Action 感兴趣，希望深入了解其语法结构可以自行查阅 <a href="https://docs.github.com/cn/actions" target="_blank" rel="noopener noreferrer">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="编写workflows文件"><a href="#编写workflows文件" class="header-anchor">#</a> 编写workflows文件</h4> <p>要想使用 Github Action 我们得在项目根目录下创建  <code>.github/workflows/main.yml</code> 。</p> <p>GitHub 只要发现<code>.github/workflows</code>目录里面有<code>.yml</code>文件，就会自动运行该文件。</p> <p><code>.github/workflows/main.yml</code>：</p> <details class="custom-block details"><summary>See More</summary> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy GitHub Pages And Gitee Pages
<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> master
<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token comment"># 构建并部署</span>
  <span class="token key atrule">build-and-deploy</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token comment"># 拉取仓库代码</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v2.3.1
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">persist-credentials</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

      <span class="token comment"># 构建</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token comment"># 注意在 Settings-&gt;Secrets 配置 VSSUE_CLIENT_ID : OAuth Apps</span>
          <span class="token key atrule">VSSUEID</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.VSSUE_CLIENT_ID <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">VSSUESECRET</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.VSSUE_CLIENT_SECRET <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">run</span><span class="token punctuation">:</span> npm install <span class="token important">&amp;&amp;</span> npm run build

      <span class="token comment"># 部署到分支</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> JamesIves/github<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>action@3.5.9
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token comment"># 注意在 Settings-&gt;Secrets 配置 ACCESS_TOKEN : Personal access tokens</span>
          <span class="token key atrule">ACCESS_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.ACCESS_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token comment"># 需要部署的分支</span>
          <span class="token key atrule">BRANCH</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages
          <span class="token comment"># vue项目 build 目录</span>
          <span class="token key atrule">FOLDER</span><span class="token punctuation">:</span> .vuepress/dist
          
  <span class="token comment"># 同步 gitee 并 更新 giteepages</span>
  <span class="token key atrule">sync-to-gitee</span><span class="token punctuation">:</span>
    <span class="token key atrule">needs</span><span class="token punctuation">:</span> build<span class="token punctuation">-</span>and<span class="token punctuation">-</span>deploy
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token comment"># 克隆项目至 gitee</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Sync to Gitee
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> wearerequired/git<span class="token punctuation">-</span>mirror<span class="token punctuation">-</span>action@v1.0.1
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
            <span class="token comment"># 注意在 Settings-&gt;Secrets 配置 GITEE_RSA_PRIVATE_KEY : id_rsa</span>
            <span class="token comment"># 个人设置 -&gt; SSH公钥 -&gt; 上传公钥</span>
            <span class="token key atrule">SSH_PRIVATE_KEY</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITEE_RSA_PRIVATE_KEY <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
            <span class="token comment"># 注意替换为你的 GitHub 源仓库地址 SSH</span>
            <span class="token key atrule">source-repo</span><span class="token punctuation">:</span> <span class="token string">&quot;git@github.com:QiJieH/blog.git&quot;</span>
            <span class="token comment"># 注意替换为你的 Gitee 目标仓库地址</span>
            <span class="token key atrule">destination-repo</span><span class="token punctuation">:</span> <span class="token string">&quot;git@gitee.com:qijieh/blog.git&quot;</span>

      <span class="token comment"># 更新部署 gitee pages</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build Gitee Pages
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> yanglbme/gitee<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>action@v1.1.3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
            <span class="token comment"># 注意替换为你的 Gitee 用户名</span>
            <span class="token key atrule">gitee-username</span><span class="token punctuation">:</span> QiJieH
            <span class="token comment"># 注意在 Settings-&gt;Secrets 配置 GITEE_PASSWORD : gitee password</span>
            <span class="token key atrule">gitee-password</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITEE_PASSWORD <span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token comment"># 注意替换为你的 Gitee 仓库</span>
            <span class="token key atrule">gitee-repo</span><span class="token punctuation">:</span> qijieh/blog
</code></pre></div></details> <div class="custom-block warning"><p>注意 YAML 语法对于Tab缩进有着严格要求，请务必确保代码缩进格式正确！！！</p></div> <p>以上是本博客的 workflows 流程，如果你熟悉 Github 和 Gitee 的相关配置你可以直接套用并替换相关属性即可。当然，我也会在下方逐一带领配置。</p> <p>首先确保你的 <code>main.yml</code> 文件路径正确，此时你的项目结构应该大致为：</p> <div class="language- extra-class"><pre class="language-text"><code>.
├── .github
│   └── workflows
│		└── main.yml
├── .vuepress
├── blogs
├── node_modules
├── .gitignore
├── package.json
├── package-lock.json
└── README.md
</code></pre></div><blockquote><p>关于 <code>.gitignore</code> 文件说明：</p> <p>由于现在方案的编译环节 <code>npm run build</code> 交由了 Github Action 完成，我们不再需要上传生成的静态文件目录</p> <div class="language- extra-class"><pre class="language-text"><code>node_modules/
.vuepress/dist/
</code></pre></div></blockquote> <p>接下来将会对 <code>.github/workflows/main.yml</code> 代码进行逐一讲解配置。</p> <h4 id="基本字段说明"><a href="#基本字段说明" class="header-anchor">#</a> 基本字段说明</h4> <p><strong>1. <code>name</code></strong></p> <p><code>name</code> 字段是 workflow 的名称。如果省略该字段，默认为当前 workflow 的文件名。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>name: Deploy GitHub Pages And Gitee Pages
</code></pre></div><p><strong>2. <code>on</code></strong></p> <p><code>on</code> 字段指定触发 workflow 的条件，通常是某些事件。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>on:
  push:
    branches:
      - master
</code></pre></div><p>当推送至 <code>master</code> 分支时，触发 workflow。</p> <p><strong>3. <code>jobs</code></strong></p> <p><code>jobs</code> 字段是 workflow 的主体当满足 <code>on</code> 的条件时就会运行 <code>jobs</code> 中的各项任务</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build-and-deploy</span><span class="token punctuation">:</span>
  <span class="token key atrule">sync-to-gitee</span><span class="token punctuation">:</span>
</code></pre></div><p><strong>4. <code>needs</code></strong></p> <p><code>needs</code> 字段当前 <code>job</code> 的依赖关系，只有当 <code>needs</code> 中的 <code>job</code> 运行完成后才会执行当前 <code>job</code></p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build-and-deploy</span><span class="token punctuation">:</span>
  <span class="token key atrule">sync-to-gitee</span><span class="token punctuation">:</span>
  	<span class="token key atrule">needs</span><span class="token punctuation">:</span> build<span class="token punctuation">-</span>and<span class="token punctuation">-</span>deploy
</code></pre></div><p>其可以是一个 <code>job</code> 数组 <code>[job1,job2]</code></p> <p><strong>5. <code>runs-on</code></strong></p> <p>当前 <code>job</code> 运行的虚拟机环境，必填字段</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build-and-deploy</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
</code></pre></div><p>可用虚拟机如下</p> <ul><li><code>ubuntu-latest</code>，<code>ubuntu-18.04</code> 或 <code>ubuntu-16.04</code></li> <li><code>windows-latest</code>，<code>windows-2019</code>  或 <code>windows-2016</code></li> <li><code>macOS-latest</code> 或 <code>macOS-10.14</code></li></ul> <p><strong>6.<code>steps</code></strong></p> <p><code>steps</code>字段指定每个 <code>Job</code> 的运行步骤，可以包含一个或多个步骤。每个步骤都可以指定以下三个字段。</p> <blockquote><ul><li><code>name</code>：步骤名称。</li> <li><code>use</code> ：使用市场发布的 action 脚本</li> <li><code>run</code>：该步骤运行的命令或者 action。</li> <li><code>env</code>：该步骤所需的环境变量。</li> <li><code>with</code> ：额外配置信息</li></ul></blockquote> <p>将 action 抽离出来，并设立市场复用代码正是 Github Action 的优越之处，在 <a href="https://github.com/marketplace?type=actions" target="_blank" rel="noopener noreferrer">Markplace<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中发布了大量的 action 脚本，你可以直接在 yml 文件中以代码仓库的方式引用。</p> <h4 id="工作流程梳理"><a href="#工作流程梳理" class="header-anchor">#</a> 工作流程梳理</h4> <p><code>main.yml</code>  的工作流程可以总结为：</p> <ol><li>每当代码 push 到 master分支 时触发 wrokflow ，其一共有两个 <code>job</code></li> <li>执行 <code>build-and-deploy</code> 任务，其分为三步 <code>step</code> <ol><li><code>Checkout</code> ：使用了 <a href="https://github.com/marketplace/actions/checkout" target="_blank" rel="noopener noreferrer">actions/checkout<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 拉取代码到虚拟机</li> <li><code>build</code> ：在虚拟机运行命令行 <code>npm install &amp;&amp; npm run build</code> <strong>就是在这一步服务器帮我们编译生成了网页数据</strong></li> <li><code>Deploy</code> ：使用 <a href="https://github.com/marketplace/actions/deploy-to-github-pages" target="_blank" rel="noopener noreferrer">JamesIves/github-pages-deploy-action<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 将生成的网页源码部署到 <code>gh-pages</code> 分支上</li></ol></li> <li>当 <code>build-and-deploy</code> 执行完毕后，运行 <code>sync-to-gitee</code> 任务，其一共有两步 <code>step</code> <ol><li><code>Sync to Gitee</code> ：使用 <a href="https://github.com/wearerequired/git-mirror-action" target="_blank" rel="noopener noreferrer">wearerequired/git-mirror-action<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 强制同步 Gitee 仓库</li> <li><code>Build Gitee Pages</code> ：使用 <a href="https://github.com/yanglbme/gitee-pages-action" target="_blank" rel="noopener noreferrer">yanglbme/gitee-pages-action<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 更新 Gitee Pages 服务</li></ol></li></ol> <div class="custom-block warning"><p>注意：在自动部署方案中，我们不再使用单分支开发，我们将额外创建一个独立分支 <code>gh-pages</code> 用来托管生成的网页源码。</p> <p>我们的项目分支结构应该为：</p> <ul><li><code>master</code> ：存储 vuepress 构建代码</li> <li><code>gh-pages</code> ：存储编译生成的网页源码</li></ul> <p>该分支必须命名为 <code>gh-pages</code> ，否则无法使用 Github Pages 服务，你无需手动创建，<code>JamesIves/github-pages-deploy-action</code> 会自动帮我们创建该分支。</p></div> <h4 id="workflow敏感数据"><a href="#workflow敏感数据" class="header-anchor">#</a> workflow敏感数据</h4> <p>在某些 <code>step</code> 中，访问仓库，操作仓库等等一系列操作，会需要进行身份验证，这样就涉及到一些仓库令牌，访问密码之类的敏感数值，我们不能直接将其明文暴露在 <code>yml</code> 文件中，所以我们使用了系统环境变量的方式存储在了你的仓库（虚拟机）中，通过</p> <div><p><code>${{ secret.NAME }}</code></p></div><p>方法，能让我们从虚拟机中拿到这些数值。</p> <p>接下来我们将逐个生成和设置这些敏感数据</p> <h5 id="deploy"><a href="#deploy" class="header-anchor">#</a> <strong><code>Deploy</code></strong></h5> <p>在这一步中虚拟机会将  <code>FOLDER</code> 下的生成内容推送至 Github 仓库的 <code>gh-pages</code> 分支，所以需要一个仓库的访问令牌，你可以参考 <a href="https://docs.github.com/cn/github/authenticating-to-github/creating-a-personal-access-token" target="_blank" rel="noopener noreferrer">官方文档 创建个人访问令牌<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，生成一个用于命令行访问仓库的个人令牌。</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>      <span class="token comment"># 部署到分支</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> JamesIves/github<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>action@3.5.9
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token comment"># 注意在 Settings-&gt;Secrets 配置 ACCESS_TOKEN : Personal access tokens</span>
          <span class="token key atrule">ACCESS_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.ACCESS_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token comment"># 需要部署的分支</span>
          <span class="token key atrule">BRANCH</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages
          <span class="token comment"># vue项目 build 目录</span>
          <span class="token key atrule">FOLDER</span><span class="token punctuation">:</span> .vuepress/dist
</code></pre></div><p><strong>个人头像 &gt; Setting &gt; Developer settings &gt; <a href="https://github.com/settings/tokens" target="_blank" rel="noopener noreferrer">Personal access tokens<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> &gt; Generate new token</strong></p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806154720.png" alt="Personal access token" style="width:780px;border:solid 3px #eaecef;"> <p><code>Note</code> 仅用于提示令牌信息，<strong>需要注意勾选 <code>Scopes</code> 中的 <code>repo</code> 和 <code>workflow</code></strong>，点击 <code>Generate token</code> 按钮生成 <code>token</code></p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806155101.png" alt="Generate token" style="width:780px;border:solid 3px #eaecef;"> <p>之后页面会跳转会 <code>Personal access token</code> ，并出现蓝色提示框，里面的字符串便是生成的个人令牌，这串数值只会显示这一次，当你离开当前页面后就会被永久隐藏，请务必保管好。</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806155442.png" alt="Generate token sucess" style="width:780px;border:solid 3px #eaecef;"> <p>虽然你可以将其直接复制到 <code>.giyhub/workflowes/main.yml</code> 文件的 <code>Deploy.with.ACCESS_TOKEN</code> ，但是这样是十分不安全的。<strong>接下来我们将其保存至仓库的 Secrets 下。</strong></p> <blockquote><p>Secrets are environment variables that are <strong>encrypted</strong> and only exposed to selected actions. Anyone with <strong>collaborator</strong> access to this repository can use these secrets in a workflow.</p></blockquote> <p>Secrets 相当于当前虚拟机的系统环境变量，在该仓库运行的 workflow 文件可以通过</p> <div><p><code>${{secrets.NAME}}</code></p></div><p>访问这些系统变量。</p> <p><strong>仓库 &gt; Setting &gt; Secrets &gt; New Secrets</strong> 按照以下方式填写</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806160224.png" alt="Secrets" style="border:solid 3px #eaecef;"> <p>Name 是存储系统环境变量的名称，你可以随意填写只需修改 workflow 文件中的变量名即可。点击 Add secret 即可完成仓库系统环境的添加，只后只要在 workflow 文件中以</p> <div><p><code>${{ secrets.ACCESS_TOKEN }}</code></p></div><p>的方式即可访问预先设置好的环境变量。</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> JamesIves/github<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>action@3.5.9
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token comment"># 注意在 Settings-&gt;Secrets 配置 ACCESS_TOKEN : Personal access tokens</span>
          <span class="token key atrule">ACCESS_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.ACCESS_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token comment"># 需要部署的分支</span>
          <span class="token key atrule">BRANCH</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages
          <span class="token comment"># vue项目 build 目录</span>
          <span class="token key atrule">FOLDER</span><span class="token punctuation">:</span> .vuepress/dist
</code></pre></div><h5 id="sync-to-gitee"><a href="#sync-to-gitee" class="header-anchor">#</a> <strong><code>Sync to Gitee</code></strong></h5> <p>在这一步中 action 会完成 Gitee 仓库代码的同步，这里将会使用 <a href="https://docs.github.com/cn/github/authenticating-to-github/connecting-to-github-with-ssh" target="_blank" rel="noopener noreferrer">SSH公私钥配对<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的方式进行 Gitee 身份验证。如果你熟悉 Github SSH 的配布方式可以自行设置。</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>      <span class="token comment"># 克隆项目至 gitee</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Sync to Gitee
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> wearerequired/git<span class="token punctuation">-</span>mirror<span class="token punctuation">-</span>action@v1.0.1
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
            <span class="token comment"># 注意在 Settings-&gt;Secrets 配置 GITEE_RSA_PRIVATE_KEY : id_rsa</span>
            <span class="token comment"># 个人设置 -&gt; SSH公钥 -&gt; 上传公钥</span>
            <span class="token key atrule">SSH_PRIVATE_KEY</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITEE_RSA_PRIVATE_KEY <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
            <span class="token comment"># 注意替换为你的 GitHub 源仓库地址 SSH</span>
            <span class="token key atrule">source-repo</span><span class="token punctuation">:</span> <span class="token string">&quot;git@github.com:QiJieH/blog.git&quot;</span>
            <span class="token comment"># 注意替换为你的 Gitee 目标仓库地址</span>
            <span class="token key atrule">destination-repo</span><span class="token punctuation">:</span> <span class="token string">&quot;git@gitee.com:qijieh/blog.git&quot;</span>
</code></pre></div><p><strong>生成新 SSH 密钥</strong></p> <blockquote><p>如果你计算机中曾经设置过 Github 或 Gitee 的 SSH 服务可以跳过此步。</p></blockquote> <ol><li><p>打开 Git Bash。</p></li> <li><p>键入以下命令。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>ssh-keygen
</code></pre></div></li> <li><p>提示您“Enter a file in which to save the key（输入要保存密钥的文件）”时，按 Enter 键。 这将接受默认文件位置。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span> Enter a <span class="token function">file</span> <span class="token keyword">in</span> <span class="token function">which</span> to save the key <span class="token punctuation">(</span>/c/Users/you/.ssh/id_rsa<span class="token punctuation">)</span>:<span class="token punctuation">[</span>Press enter<span class="token punctuation">]</span>
</code></pre></div></li> <li><p>在提示时输入安全密码。 更多信息请参阅<a href="https://docs.github.com/cn/articles/working-with-ssh-key-passphrases" target="_blank" rel="noopener noreferrer">“使用 SSH 密钥密码”<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token operator">&gt;</span> Enter passphrase <span class="token punctuation">(</span>empty <span class="token keyword">for</span> no passphrase<span class="token punctuation">)</span>: <span class="token punctuation">[</span>Type a passphrase<span class="token punctuation">]</span>
<span class="token operator">&gt;</span> Enter same passphrase again: <span class="token punctuation">[</span>Type passphrase again<span class="token punctuation">]</span>
</code></pre></div></li></ol> <p>运行上面步骤后在你的 <code>/c/Users/you/.ssh/</code> 目录下会拥有两个文件</p> <div class="language- extra-class"><pre class="language-text"><code>/c/Users/you/.ssh/
	&gt; id_rsa    	// 私钥存储在客户端
	&gt; id_rsa_pub	// 公钥存储在服务端
</code></pre></div><p>你可以通过文本方式打开文件进行查看，接下来只需要将 <code>id_rsa_pub</code> 上传至远程仓库即可。</p> <blockquote><p>这里参考的是 Github 的中文文档（文档比 Gitee 详细），SSH 公私钥生成是 Git 提供的服务，文档通用 。</p> <p>Github 和 Gitee 都是基于 SSH 协议的 Git 服务，如果你在 Github 已经配置了 SSH ，你完全可以使用同一份公钥在 Gitee ，这样我们只使用一个私钥在两个平台都能进行验证。这里只需要在 Gitee 设置 SSH 。</p></blockquote> <p><strong><a href="https://gitee.com/help/articles/4191" target="_blank" rel="noopener noreferrer">Gitee SSH 公钥设置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <blockquote><p>注意此处我们需要生成的是 账户SSH Key 不是 仓库SSH Key，其区别如下：</p> <p>和仓库&quot;只读&quot;权限的 SSH Key 相比，账户的 SSH Key <strong>同时具备<code>推送/拉取</code>的权限，对用户创建/参与的仓库均能使用</strong>，使用起来更加方便。</p></blockquote> <p>主页右上角 <strong>「个人设置」-&gt;「安全设置」-&gt;「SSH公钥」-&gt;「<a href="https://gitee.com/profile/sshkeys" target="_blank" rel="noopener noreferrer">添加公钥<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>」</strong> ，添加生成的 public key 添加到当前账户中。</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806164348.png" alt="SSH 公钥" style="border:solid 3px #eaecef;"> <p>点击确定即可，可以不用管 SHA256 。</p> <p>接下来，只需要将配套的将我们的 私钥<code>id_rsa</code> 储存在 Github 仓库的 Secrects 中，这样 workflow文件就能通过读取系统环境变量</p> <div><p><code>${{secrect.Name}}</code></p></div><p>的方式用私钥与 Gitee 上的公钥进行配对，以此验证身份，获得仓库操作权限。</p> <p><strong>Github 仓库 &gt; Setting &gt; Secrets &gt; New Secrets</strong></p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806174117.png" alt="存储私钥至 Github仓库Secrets" style="border:solid 3px #eaecef;"> <p>通过</p> <div><p><code>${{ secrtes.GITEE_RSA_PRIVATE_KEY }}</code></p></div><p>与 Gitee 仓库进行 SSH 验证，获得 Gitee 仓库的操作权限。</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>      <span class="token comment"># 克隆项目至 gitee</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Sync to Gitee
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> wearerequired/git<span class="token punctuation">-</span>mirror<span class="token punctuation">-</span>action@v1.0.1
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
            <span class="token key atrule">SSH_PRIVATE_KEY</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITEE_RSA_PRIVATE_KEY <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
            <span class="token comment"># 注意替换为你的 GitHub 源仓库地址SSH Clone</span>
            <span class="token key atrule">source-repo</span><span class="token punctuation">:</span> <span class="token string">&quot;git@github.com:QiJieH/blog.git&quot;</span>
            <span class="token comment"># 注意替换为你的 Gitee 目标仓库地址 Sync</span>
            <span class="token key atrule">destination-repo</span><span class="token punctuation">:</span> <span class="token string">&quot;git@gitee.com:qijieh/blog.git&quot;</span>
</code></pre></div><h5 id="build-gitee-pages"><a href="#build-gitee-pages" class="header-anchor">#</a> <strong><code>Build Gitee Pages</code></strong></h5> <p>完成代码的同步后，我们需要更新 Gitee Pages 服务，刷新网页内容。</p> <blockquote><p>Gitee Pages 服务不支持自动更新，开通会员的 Gitee Pages Pro 服务将支持。</p> <p>该 yanglbme/gitee-pages-action 的 Action 应该是使用了类似网页脚本的方法替代了手动点击 Gitee Pages 的更新按钮。</p> <p>注意：该 action 需要事先开启 Gitee 仓库的 Pages 服务才能正常运行。但是此时我们的 Gitee 仓库还是为空，无法启动 Gitee Pages 服务，所以你需要在第一次推送后手动前往 Gitee Pages 开启。</p></blockquote> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># 更新部署 gitee pages</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build Gitee Pages
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> yanglbme/gitee<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>action@v1.1.3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
            <span class="token comment"># 注意替换为你的 Gitee 用户名</span>
            <span class="token key atrule">gitee-username</span><span class="token punctuation">:</span> QiJieH
            <span class="token comment"># 注意在 Settings-&gt;Secrets 配置 GITEE_PASSWORD : gitee password</span>
            <span class="token key atrule">gitee-password</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITEE_PASSWORD <span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token comment"># 注意替换为你的 Gitee 仓库</span>
            <span class="token key atrule">gitee-repo</span><span class="token punctuation">:</span> qijieh/blog
</code></pre></div><p>这个 action 需要我们提供 Gitee 的账户密码，我们依旧将其存放在 Github 仓库的 Secrtes 中。</p> <p><strong>Github 仓库 &gt; Setting &gt; Secrets &gt; New Secrets</strong></p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806175611.png" alt="Secret Gitee Password" style="border:solid 3px #eaecef;"> <p>点击 Add secret ，这样 workflow 文件便可以提供系统环境变量的方式</p> <div><p><code>${{ GITEE_PASSWORD }}</code></p></div><p>访问到我们的 Gitee 账户密码。</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># 更新部署 gitee pages</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build Gitee Pages
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> yanglbme/gitee<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>action@v1.1.3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
            <span class="token comment"># 注意替换为你的 Gitee 用户名</span>
            <span class="token key atrule">gitee-username</span><span class="token punctuation">:</span> QiJieH
            <span class="token key atrule">gitee-password</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.GITEE_PASSWORD <span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token comment"># 注意替换为你的 Gitee 仓库</span>
            <span class="token key atrule">gitee-repo</span><span class="token punctuation">:</span> qijieh/blog
</code></pre></div><h4 id="vssue评论插件"><a href="#vssue评论插件" class="header-anchor">#</a> Vssue评论插件</h4> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806184726.png" alt="Secret Gitee Password" style="width:700px;border:solid 3px #eaecef;"> <p><a href="https://vssue.js.org/zh/guide/" target="_blank" rel="noopener noreferrer">Vssue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是一款无需后台的评论系统，其由 Vue 驱动并基于 Github 仓库的 Issue 实现。被广泛运用于博客，文档等无后端评论场景。</p> <p>由于其配置需要 Github 仓库的 Issue 所以需要通过 <a href="https://github.com/settings/developers" target="_blank" rel="noopener noreferrer">Github OAuth Apps<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的接口数据。</p> <p>由于 reco 主题已经将 Vssue 集合在了官方插件 <a href="https://vuepress-theme-reco.recoluan.com/views/plugins/comments.html" target="_blank" rel="noopener noreferrer">comment<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中，我们无需额外 <code>npm install</code>  ，通过参考 <a href="https://vuepress-theme-reco.recoluan.com/views/plugins/comments.html" target="_blank" rel="noopener noreferrer">文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 在项目的 <code>.vuepress/config.js</code> 中引入插件</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// .vuepress/config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  theme<span class="token operator">:</span> <span class="token string">'reco'</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
        <span class="token string">'@vuepress-reco/comments'</span><span class="token punctuation">,</span> 
        <span class="token punctuation">{</span>
    		solution<span class="token operator">:</span> <span class="token string">'vssue'</span><span class="token punctuation">,</span>
    		options<span class="token operator">:</span> <span class="token punctuation">{</span>
      			platform<span class="token operator">:</span> <span class="token string">'github'</span><span class="token punctuation">,</span>
      			owner<span class="token operator">:</span> <span class="token string">'OWNER_OF_REPO'</span><span class="token punctuation">,</span>
      			repo<span class="token operator">:</span> <span class="token string">'NAME_OF_REPO'</span><span class="token punctuation">,</span>
      			clientId<span class="token operator">:</span> <span class="token string">'YOUR_CLIENT_ID'</span><span class="token punctuation">,</span>
      			clientSecret<span class="token operator">:</span> <span class="token string">'YOUR_CLIENT_SECRET'</span><span class="token punctuation">,</span>
    		<span class="token punctuation">}</span>
  		<span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span> 
<span class="token punctuation">}</span>
</code></pre></div><p>其中的 <code>owner</code> 填写仓库拥有者，<code>repo</code> 填写仓库名称，<code>clientId</code> 和 <code>clientSecret</code> 需要前往 Github 仓库设置。</p> <blockquote><p>我个人仓库的地址是 https://github.com/QiJieH/blog 配置如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>owner<span class="token operator">:</span> <span class="token string">'QiJieH'</span><span class="token punctuation">,</span>
repo<span class="token operator">:</span> <span class="token string">'blog'</span><span class="token punctuation">,</span>
</code></pre></div></blockquote> <p>依次点击 Github 的 <strong>个人头像 &gt; Setting &gt; Developer setting &gt; <a href="https://github.com/settings/developers" target="_blank" rel="noopener noreferrer">OAuth Apps<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> &gt; New OAuth App</strong></p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806185536.png" alt="creat OAuth app" style="border:solid 3px #eaecef;"> <p><code>Homepage URL</code> ：需要授权的网址</p> <p><code>Authorization callback URL</code> ：授权回调地址</p> <p>请自行修改该属性，填写完成后<strong>点击 Register application 提交</strong>。</p> <p>只后我们在 OAuth Apps 列表便可以看见列表了，点击其进入</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806190302.png" alt="blog-vssue" style="width:700px;border:solid 3px #eaecef;"> <p>其中的 <code>Client ID</code> 和 <code>Client Secret</code> 便是 Vssue 插件需要的配置值了。</p> <p>将 <code>Client ID</code> 和 <code>Client Secret</code> 直接填写在 <code>config.js</code> 的 Vssue 插件配置中是不理智的，我们依旧可以使用 Github 仓库的 Secret 来存储这两个值，在 workflow 的编译 <code>build</code> 阶段将其以</p> <div><p><code>${{ secret.Name }}</code></p></div><p>的方式访问其值。</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806192128.png" alt="blog-vssue" style="width:700px;border:solid 3px #eaecef;"> <p>这里不再详细说明设置方法，请自行参考之前几个 Secret 的配置教程。</p> <p>添加成功后在我们的 workflow 文件中添加相应代码，<strong>将其添加进编译过程的环境中</strong></p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>      <span class="token comment"># 构建</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build
        <span class="token key atrule">env</span><span class="token punctuation">:</span>
          <span class="token comment"># 注意在 Settings-&gt;Secrets 配置 VSSUE_CLIENT_ID : OAuth Apps</span>
          <span class="token key atrule">VSSUEID</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.VSSUE_CLIENT_ID <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token key atrule">VSSUESECRET</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.VSSUE_CLIENT_SECRET <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token key atrule">run</span><span class="token punctuation">:</span> npm install <span class="token important">&amp;&amp;</span> npm run build
</code></pre></div><p>这样在虚拟机运行时在环境中就拥有了 <code>VSSUEID</code> 和 <code>VSSUESECRET</code> 两个变量，而 node 为我们提供在一个 <code>process.env</code> 方法，让我们能够<strong>在编译的时候访问当前进程的环境变量</strong>，我们只需要在 <code>config.js</code> 的 Vssue 配置中使用该方法即可</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// .vuepress/config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  theme<span class="token operator">:</span> <span class="token string">'reco'</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
        <span class="token string">'@vuepress-reco/comments'</span><span class="token punctuation">,</span> 
        <span class="token punctuation">{</span>
    		solution<span class="token operator">:</span> <span class="token string">'vssue'</span><span class="token punctuation">,</span>
    		options<span class="token operator">:</span> <span class="token punctuation">{</span>
      			platform<span class="token operator">:</span> <span class="token string">'github'</span><span class="token punctuation">,</span>
      			owner<span class="token operator">:</span> <span class="token string">'QiJieH'</span><span class="token punctuation">,</span>
      			repo<span class="token operator">:</span> <span class="token string">'blog'</span><span class="token punctuation">,</span>
      			clientId<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VSSUEID</span><span class="token punctuation">,</span>
      			clientSecret<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VSSUESECRET</span><span class="token punctuation">,</span>
    		<span class="token punctuation">}</span>
  		<span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span> 
<span class="token punctuation">}</span>
</code></pre></div><h4 id="开始推送"><a href="#开始推送" class="header-anchor">#</a> 开始推送</h4> <p>确保你已经替换 workflow 文件中的数据，并在 Github 和 Gitee 设置好了相应配置。检查你的 <code>main.yml</code> 文件是否正确存储在路径 <code>.github/workflows/</code> 下。</p> <p>一切准备就绪后开始你的 Git 流程，并见证 Github Action 的强大。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit -m <span class="token string">&quot;first deploy&quot;</span>
<span class="token function">git</span> push
</code></pre></div><p>推送完成后，打开 Github仓库的 Actions 按照图片依次点击进入 Action 运行日志</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806194019.png" alt="begin action" style="width:700px;border:solid 3px #eaecef;"> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806194126.png" alt="action log" style="width:700px;border:solid 3px #eaecef;"> <p>之后你便可以看见你的 workflow 文件正在被逐一执行。</p> <blockquote><p>绿勾代表执行成功</p> <p>黄色代表正在执行</p> <p>红叉代表执行出错</p> <p><strong>你可以在这里检查出错原因，请根据原因自行 debug ，这里列出几个常见的错误：</strong></p> <ul><li><p>main.yml 语法错误，请检查Tab缩进</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806195900.png" alt="erro" style="width:600px;border:solid 3px #eaecef;"></li> <li><p>仓库操作错误，令牌或密码配置不正确，请根据该步骤需要的数据检查</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806200032.png" alt="erro" style="width:600px;border:solid 3px #eaecef;"></li> <li><p>部分 action 配置错误，以下错误是以为在 Deploy 中设置生成目录 <code>.vuepress/dist</code> ，却在 <code>config.js</code> 中设置 <code>dest</code> 为 <code>docs</code> ，导致虚拟机编译 <code>npm run build</code> 后没有生成文件在 <code>.vuepress/dist</code> 下，进而致使 Deploy 环节无法从 <code>.vuepress/dist</code> 目录拉取代码到 <code>gh-pages</code> 分支。</p> <div class="language-yaml extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br></div><pre class="language-yaml"><code><span class="token comment"># 部署到分支</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> JamesIves/github<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>action@3.5.9
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token comment"># 注意在 Settings-&gt;Secrets 配置 ACCESS_TOKEN : Personal access tokens</span>
          <span class="token key atrule">ACCESS_TOKEN</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.ACCESS_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token comment"># 需要部署的分支</span>
          <span class="token key atrule">BRANCH</span><span class="token punctuation">:</span> gh<span class="token punctuation">-</span>pages
          <span class="token comment"># vue项目 build 目录</span>
          <span class="token key atrule">FOLDER</span><span class="token punctuation">:</span> .vuepress/dist
</code></pre></div><div class="language-js extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  dest<span class="token operator">:</span> <span class="token string">&quot;.vuepress/dist&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 确保这个目录与 FOLDER 保存一致</span>
<span class="token punctuation">}</span>
</code></pre></div><img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806200421.png" alt="erro" style="width:680px;border:solid 3px #eaecef;"></li></ul></blockquote> <p>当所有的 Action 正常执行完成后，你可以查看 Github 仓库是否更新了 <code>gh-pages</code> 分支，其是否存储了网页源码。</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806194559.png" alt="gh-pages" style="width:700px;border:solid 3px #eaecef;"> <p>再访问你的 Gitee 仓库查看其是否同步了代码和分支。</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806194734.png" alt="gitee sync" style="width:700px;border:solid 3px #eaecef;"> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806194823.png" alt="gitee gh-pages" style="width:700px;border:solid 3px #eaecef;"> <p>接下来你只需要手动配置一次两个仓库的 Pages 服务。</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806195000.png" alt="gitee pages" style="width:700px;border:solid 3px #eaecef;"> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806195059.png" alt="github pages" style="width:700px;border:solid 3px #eaecef;"> <p>之后便无需操心，每次提交 Github Action 都会为你完成一系列的工作。</p> <h4 id="访问你的博客"><a href="#访问你的博客" class="header-anchor">#</a> 访问你的博客</h4> <p>至此所有的自动部署已经完成，现在你的博客提交流程为：</p> <ol><li>书写博文，修改主题</li> <li><code>git push</code></li></ol> <p>Github Action 在你看不见的地方为了完成了一系列操作：</p> <ol><li>从仓库拉取代码</li> <li>编译代码，生成网页源码，并推送到 <code>gh-pages</code> 分支</li> <li>同步 Gitee 代码</li> <li>更新 Gitee Pages 服务</li></ol> <p>现在，访问你的博客网站吧！</p> <h2 id="图床搭建"><a href="#图床搭建" class="header-anchor">#</a> 图床搭建</h2> <p>尽管你可以在 Markdown 文件中使用相对路径对项目下的 <code>public</code> 文件夹的图片进行引用，但是这样做无疑增加了我们仓库的容量占用，特别是当网站中引用大量图片时，我们不可能全部将其存储在 <code>public</code> 文件夹下，这对网站性能和仓库容量都是一种极大的浪费。</p> <p>对此我选择了 <code>PicGo + Gitee</code> 在线图床的解决方案。借助于第三方的在线图床服务，我们可以在 Markdown 文件中通过 src 的方式访问在线的图片。</p> <p>下载 <a href="https://github.com/Molunerfinn/PicGo" target="_blank" rel="noopener noreferrer">PicGo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 软件至你的电脑，安装并打开。</p> <p>在插件设置中搜索 gitee 并安装插件。</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806202625.png" alt="picgo plugs" style="width:700px;border:solid 3px #eaecef;"> <p>安装成功后，打开 <strong>图床设置 &gt; Gitee图床</strong></p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806204132.png" alt="gitee set" style="width:700px;border:solid 3px #eaecef;"> <p><code>owner</code> ：仓库所有者</p> <p><code>repo</code> ：仓库名称</p> <p><code>token</code> ：个人令牌</p> <p>访问 Gitee 创建图床仓库</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806203152.png" alt="new repo" style="width:700px;border:solid 3px #eaecef;"> <blockquote><p>注意勾选 使用Readme文件初始化这个仓库</p></blockquote> <p>点击 个人头像 &gt; 设置 &gt; 私人令牌 &gt; 生成新令牌</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806203354.png" alt="token" style="width:700px;border:solid 3px #eaecef;"> <p><strong>点击提交之后，令牌token会出现，请复制妥善保存。将其填入 PicGo 图床设置 &gt; Gitee图床 &gt; token 栏中。</strong></p> <p>以我的仓库为例：</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806204018.png" alt="repo" style="width:700px;border:solid 3px #eaecef;"> <p>应该填写：</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806202758.png" alt="picgo plugs" style="width:700px;border:solid 3px #eaecef;"> <p>之后保持 PicGo 后台运行，当你的剪切板有图片或图片URL时，使用快捷键 Crtl + Shift + P 快速上传图片至仓库，随后你的剪切板将会返回图片的引用代码。</p> <img src="https://gitee.com/QiJieH/blog-image-bed/raw/master//20200806204417.png" alt="picgo plugs" style="width:700px;border:solid 3px #eaecef;"> <p>在此处可以选择引用何种代码片段。</p> <p>PicGo 除了支持 Gitee 外还支持其他图床，你可以自行百度配置。</p> <blockquote><p>Gitee 单仓库容量 500M</p> <p>Github 单仓库容量 1G</p> <p>SM.MS 容量 5G ，但是上传有时间限制</p></blockquote> <h2 id="seo优化"><a href="#seo优化" class="header-anchor">#</a> SEO优化</h2> <p>todo...</p></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">8/6/2020, 2:48:29 PM</span></div></footer> <!----> <!----> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-40a3448a><li class="level-2" data-v-40a3448a><a href="/blog/blogs/FrontEnd/2020-8/%E4%BE%9D%E6%89%98%E4%BA%8EGithubPages%E7%9A%84Vuepress%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2GithubAction%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88.html#开始之前" class="sidebar-link" data-v-40a3448a>开始之前</a></li><li class="level-2" data-v-40a3448a><a href="/blog/blogs/FrontEnd/2020-8/%E4%BE%9D%E6%89%98%E4%BA%8EGithubPages%E7%9A%84Vuepress%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2GithubAction%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88.html#快速开始" class="sidebar-link" data-v-40a3448a>快速开始</a></li><li class="level-2" data-v-40a3448a><a href="/blog/blogs/FrontEnd/2020-8/%E4%BE%9D%E6%89%98%E4%BA%8EGithubPages%E7%9A%84Vuepress%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2GithubAction%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88.html#修改配置" class="sidebar-link" data-v-40a3448a>修改配置</a></li><li class="level-2" data-v-40a3448a><a href="/blog/blogs/FrontEnd/2020-8/%E4%BE%9D%E6%89%98%E4%BA%8EGithubPages%E7%9A%84Vuepress%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2GithubAction%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88.html#首页配置" class="sidebar-link" data-v-40a3448a>首页配置</a></li><li class="level-2" data-v-40a3448a><a href="/blog/blogs/FrontEnd/2020-8/%E4%BE%9D%E6%89%98%E4%BA%8EGithubPages%E7%9A%84Vuepress%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2GithubAction%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88.html#自定样式" class="sidebar-link" data-v-40a3448a>自定样式</a></li><li class="level-3" data-v-40a3448a><a href="/blog/blogs/FrontEnd/2020-8/%E4%BE%9D%E6%89%98%E4%BA%8EGithubPages%E7%9A%84Vuepress%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2GithubAction%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88.html#修改主题颜色" class="sidebar-link" data-v-40a3448a>修改主题颜色</a></li><li class="level-3" data-v-40a3448a><a href="/blog/blogs/FrontEnd/2020-8/%E4%BE%9D%E6%89%98%E4%BA%8EGithubPages%E7%9A%84Vuepress%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2GithubAction%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88.html#修改主题样式" class="sidebar-link" data-v-40a3448a>修改主题样式</a></li><li class="level-3" data-v-40a3448a><a href="/blog/blogs/FrontEnd/2020-8/%E4%BE%9D%E6%89%98%E4%BA%8EGithubPages%E7%9A%84Vuepress%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2GithubAction%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88.html#引用脚本与样式" class="sidebar-link" data-v-40a3448a>引用脚本与样式</a></li><li class="level-2" data-v-40a3448a><a href="/blog/blogs/FrontEnd/2020-8/%E4%BE%9D%E6%89%98%E4%BA%8EGithubPages%E7%9A%84Vuepress%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2GithubAction%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88.html#添加文章" class="sidebar-link" data-v-40a3448a>添加文章</a></li><li class="level-2" data-v-40a3448a><a href="/blog/blogs/FrontEnd/2020-8/%E4%BE%9D%E6%89%98%E4%BA%8EGithubPages%E7%9A%84Vuepress%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2GithubAction%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88.html#插件配置" class="sidebar-link" data-v-40a3448a>插件配置</a></li><li class="level-2" data-v-40a3448a><a href="/blog/blogs/FrontEnd/2020-8/%E4%BE%9D%E6%89%98%E4%BA%8EGithubPages%E7%9A%84Vuepress%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2GithubAction%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88.html#部署上线" class="sidebar-link" data-v-40a3448a>部署上线</a></li><li class="level-3" data-v-40a3448a><a href="/blog/blogs/FrontEnd/2020-8/%E4%BE%9D%E6%89%98%E4%BA%8EGithubPages%E7%9A%84Vuepress%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2GithubAction%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88.html#双端部署" class="sidebar-link" data-v-40a3448a>双端部署</a></li><li class="level-3" data-v-40a3448a><a href="/blog/blogs/FrontEnd/2020-8/%E4%BE%9D%E6%89%98%E4%BA%8EGithubPages%E7%9A%84Vuepress%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2GithubAction%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88.html#手动部署" class="sidebar-link" data-v-40a3448a>手动部署</a></li><li class="level-3" data-v-40a3448a><a href="/blog/blogs/FrontEnd/2020-8/%E4%BE%9D%E6%89%98%E4%BA%8EGithubPages%E7%9A%84Vuepress%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2GithubAction%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88.html#自动部署" class="sidebar-link" data-v-40a3448a>自动部署</a></li><li class="level-2" data-v-40a3448a><a href="/blog/blogs/FrontEnd/2020-8/%E4%BE%9D%E6%89%98%E4%BA%8EGithubPages%E7%9A%84Vuepress%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2GithubAction%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88.html#图床搭建" class="sidebar-link" data-v-40a3448a>图床搭建</a></li><li class="level-2" data-v-40a3448a><a href="/blog/blogs/FrontEnd/2020-8/%E4%BE%9D%E6%89%98%E4%BA%8EGithubPages%E7%9A%84Vuepress%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2GithubAction%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88.html#seo优化" class="sidebar-link" data-v-40a3448a>SEO优化</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><APlayer audio="" fixed="true" theme="#b7daff" loop="loop" order="list" preload="auto" volume="0.7" mutex="true" lrc-type="0" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><!----></div></div>
    <script src="/blog/assets/js/app.265510bb.js" defer></script><script src="/blog/assets/js/4.9426981b.js" defer></script><script src="/blog/assets/js/1.b075f33e.js" defer></script><script src="/blog/assets/js/13.81644de3.js" defer></script><script src="/blog/assets/js/9.0e33fc2c.js" defer></script>
  </body>
</html>
